<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Pacman</title>

    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec4 vPosition;
        attribute vec3 vColor;
        varying vec4 vColorF;
        uniform float center_x;
        uniform float center_y;
        uniform float radius;
        uniform float height;
        uniform float width;
        uniform vec3 rndclr;
        uniform float clc;
        void main(){
            gl_PointSize = 1.0;
            gl_Position = vPosition;
            vColorF = vec4(rndclr.x*clc, rndclr.y*clc, rndclr.z*clc, 1.0);
        }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float; 
        varying float offset;
        varying vec4 vColorF;
        uniform float center_x;
        uniform float center_y;
        uniform float radius;
        uniform float height;
        uniform float width;
        uniform float t1;
        uniform float t2;
        uniform float clc;
        uniform vec3 rndclr;
        int inArea(float X, float Y, float cX, float cY, float r){
            float m1 = tan(t1);
            float m2 = tan(t2);
            if (sqrt((X - cX)*(X - cX) + (Y - cY)*(Y - cY)) <= r){
                if ((Y-cY) <= m1*(X-cX) && (Y-cY) >= m2*(X-cX)){
                    return 2;
                }
                else{
                    return 1;
                }
            }
            else if (X-cX-0.001 <= r && X-cX+0.001 >= -r && Y-cY-0.001 <= r && Y-cY+0.001 >= -r){
                return 2;
            }
            else{
                return 0;
            }
        } // What does this draw? (assume entire screen is rendered) 
        // bool inArea(float cX, float cY) {if (cX < 40.0 && cX > -40.0 && cY < 40.0 && cY > -40.0){return true;} else {return false;}}
        void main() {
            float x_val = 2.0*(gl_FragCoord.x - width/2.0)/width;
            float y_val = 2.0*(gl_FragCoord.y - height/2.0)/height;
            int result = inArea(x_val, y_val, center_x, center_y, radius);
            if (result == 1){
                gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);
                //gl_FragColor = vColorF;
            }
            else if (result == 2){
                gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
            }
            else{
                gl_FragColor = vColorF;
            }
        } </script>

            <script type="text/javascript" src="Common/webgl-utils.js"></script>
            <script type="text/javascript" src="Common/initShaders.js"></script>
            <script type="text/javascript" src="Common/MV.js"></script>
            <script type="text/javascript" src="Pacman.js"></script>
</head>
<style>
    canvas, #gl-canvas{
        align-content: center;
        text-align: center;
    }
    div {
        align-content: center;
        text-align: center;
    }
    body{
        background-color: black;
    }
</style>
<body>
    <div>
        <canvas id="gl-canvas" width="600" height="600">
            Oops ... your browser doesn't support the HTML5 canvas element
        </canvas>
    </div>  
</body>

</html>